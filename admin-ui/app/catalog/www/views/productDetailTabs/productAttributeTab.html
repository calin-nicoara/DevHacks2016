<div class="panel panel-default">

  <div class="panel-heading">Product Attribute Values</div>
  <div class="panel-body">

    <!-- Direct category attributes-->
    <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
      <!-- Warning if not all mandatory attributes are set -->
      <div class="alert alert-warning alert-dismissible fade in" role="alert"
           ng-if="!attrsCtrl.allMandatoryAttributeValuesSet">
        <button type="button" class="close" data-dismiss="alert" aria-label="Close"><span
          aria-hidden="true">Ã—</span></button>
        <strong>Mandatory attributes are not all set.</strong> You need to insert values for each
        mandatory attribute in order to enable this product.
      </div>

      <div ng-repeat="key in ['requiredAttributes', 'nonRequiredAttributes']">
        <h2>{{attrsCtrl.data[key]['title']}}</h2>
        <div ng-repeat="(categoryPath, listAttrValues) in attrsCtrl.data[key]['data']">
          <!-- Category grouping -->
          <h3>{{categoryPath}}</h3>
          <div ng-repeat="attribute in listAttrValues track by $index" class="panel panel-default">
            <div class="panel-heading" role="tab"
                 id="{{'heading' + attribute.categoryAttribute.id}}">
              <div class="row">

                <div class="col-md-3">
                  <label class="control-label">{{attribute.categoryAttribute.name}}</label>
                </div>

                <div class="col-md-5">
                  <input ng-disabled="!attribute.enableEdit"
                         ng-if="attribute.categoryAttribute.type === 'ALPHANUMERIC'"
                         type="text" ng-model="attribute.attributeValue.value"
                         class="form-control"/>

                  <input ng-disabled="!attribute.enableEdit"
                         ng-if="attribute.categoryAttribute.type === 'NUMERIC' || attribute.categoryAttribute.type === 'RANGEABLE'"
                         input-number-filter="FLOAT"
                         type="number" ng-model="attribute.attributeValue.value"
                         class="form-control"/>

                  <select ng-disabled="!attribute.enableEdit"
                          ng-if="attribute.categoryAttribute.type === 'LIST'"
                          ng-model="attribute.attributeValue.value"
                          class="form-control">
                    <option ng-repeat="value in attribute.categoryAttribute.values"
                            value="{{value}}">{{value}}
                    </option>
                  </select>

                  <div ng-if="attrsCtrl.useBooleanTypeEdit(attribute.categoryAttribute.type)">

                    <div class="col-md-6">
                      <div class="col-md-6">
                        <label class="control-label"
                               for="radioYes{{attribute.categoryAttribute.id}}">Yes</label>
                      </div>
                      <div class="col-md-6">
                        <input ng-disabled="!attribute.enableEdit"
                               type="radio" ng-model="attribute.attributeValue.value"
                               id="radioYes{{attribute.categoryAttribute.id}}"
                               value="true" class="form-control"/>
                      </div>
                    </div>

                    <div class="col-md-6">
                      <div class="col-md-6">
                        <label class="control-label"
                               for="radioNo{{attribute.categoryAttribute.id}}">No</label>
                      </div>
                      <div class="col-md-6">
                        <input ng-disabled="!attribute.enableEdit"
                               type="radio" ng-model="attribute.attributeValue.value"
                               id="radioNo{{attribute.categoryAttribute.id}}"
                               value="false" class="form-control"/>
                      </div>
                    </div>

                  </div>

                </div>


                      <span ng-if="!attribute.enableEdit">
                        <div class="col-md-1 col-md-offset-1">
                          <a class="collapsed" role="button" data-toggle="collapse"
                             data-parent="#accordion"
                             data-target="#{{'collapse' + attribute.categoryAttribute.id}}"
                             aria-expanded="true"
                             aria-controls="{{'collapse' + attribute.categoryAttribute.id}}">
                            <button type="button" class="btn btn-info btn-action"
                                    data-toggle="tooltip" title="View category attribute details">
                              <span class="glyphicon glyphicon-eye-open" aria-hidden="true"></span>
                            </button>
                          </a>
                        </div>
                        <div class="col-md-1">
                          <button type="button" class="btn btn-info btn-action"
                                  ng-click="attrsCtrl.removeAttributeValue(attribute)"
                                  data-toggle="tooltip" title="Remove attribute value">
                            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
                          </button>
                        </div>
                        <div class="col-md-1">
                          <button type="button" class="btn btn-info btn-action"
                                  ng-click="attrsCtrl.enableEditAttribute(attribute)"
                                  data-toggle="tooltip" title="Edit attribute value">
                            <span class="glyphicon glyphicon-edit" aria-hidden="true"></span>
                          </button>
                        </div>
                       </span>

                      <span ng-if="attribute.enableEdit">
                          <div class="col-md-2">
                            <button type="button" class="btn btn-info btn-action"
                                    ng-click="attrsCtrl.saveAttributeValue(attribute)">Save</button>
                          </div>
                          <div class="col-md-2">
                            <button type="button" class="btn btn-info btn-action"
                                    ng-click="attrsCtrl.cancelEditAttribute(attribute)">Cancel</button>
                          </div>
                      </span>

              </div> <!-- end attribute row -->
            </div>
            <div id="{{'collapse' + attribute.categoryAttribute.id}}"
                 class="panel-collapse collapse" role="tabpanel"
                 aria-labelledby="{{'heading' + attribute.categoryAttribute.id}}">
              <div class="panel-body">
                <ul>
                  <li ng-repeat="(key, value) in attrsCtrl.categoryAttributeMappings">
                      <span
                        ng-if="attrsCtrl.isAttributeIcon(key, attribute.categoryAttribute.type)">Icon: <br>
                        <img class="img-responsive"
                             ng-src="{{attrsCtrl.getImageMediaSrc(attribute.categoryAttribute.values[0])}}"
                             alt=""></span>
                    <span ng-if="!attrsCtrl.isAttributeIcon(key, attribute.categoryAttribute.type)">{{value}}: {{attribute.categoryAttribute[key]}}</span>
                    <!--{{value}}: {{attribute.categoryAttribute[key]}}-->
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <p ng-if="attrsCtrl.data[key]['data'].length === 0">No {{attrsCtrl.data[key]['title'] | lowercase}}</p>
        <hr>
      </div>
    </div>
    <!-- End direct category attributes-->


    </ul>
  </div>
</div>
